import S,{act as m}from"react-test-renderer";import{Testeranto as h}from"testeranto";var d=(e,r,a)=>h(a,r,e,{ports:0},{beforeEach:async function(o){let n;return await m(()=>{n=S.create(o())}),n},andWhen:async function(o,n){return await m(()=>n()(o)),o}});import{assert as s}from"chai";import t from"react";import{Provider as v,useSelector as b}from"react-redux";import{createSelector as g,createSlice as T,createStore as f}from"@reduxjs/toolkit";var u=T({name:"login app",initialState:{password:"",email:"",error:"no_error"},reducers:{setPassword:(e,r)=>{e.password=r.payload},setEmail:(e,r)=>{e.email=r.payload},signIn:e=>{e.error=P(e)}}}),E=e=>e,y=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),P=e=>y(e.email)?e.password!=="password"&&e.email!=="adam@email.com"?"credentialFail":"no_error":"invalidEmail",w=g([E],e=>({...e,disableSubmit:e.email==""||e.password==""})),c=()=>{let e=f(u.reducer);return{app:u,select:{loginPageSelection:w},store:e}};var l=c(),L=l.select.loginPageSelection,p=l.app.actions,i=l.store;function A(){let e=b(L);return t.createElement("div",null,t.createElement("h2",null,"Welcome back!"),t.createElement("p",null,"Sign in and get to it."),t.createElement("form",null,t.createElement("input",{type:"email",value:e.email,onChange:r=>i.dispatch(p.setEmail(r.target.value))}),t.createElement("p",{id:"invalid-email-warning",className:"warning"},e.error==="invalidEmail"&&"Something isn\u2019t right. Please double check your email format"),t.createElement("br",null),t.createElement("input",{type:"password",value:e.password,onChange:r=>i.dispatch(p.setPassword(r.target.value))}),t.createElement("p",null,e.error==="credentialFail"&&"You entered an incorrect email, password, or both."),t.createElement("br",null),t.createElement("button",{disabled:e.disableSubmit,onClick:r=>{i.dispatch(p.signIn())}},"Sign In")),t.createElement("pre",null,JSON.stringify(e,null,2)))}function I(){return t.createElement(v,{store:i},t.createElement(A,null))}import{features as N}from"/Users/adam/Code/kokomoBay/dist/tests/testerantoFeatures.test.js";var k=N.hello,X=d({Suites:{Default:"a default suite"},Givens:{default:()=>({})},Whens:{TheLoginIsSubmitted:()=>e=>e.root.findByType("button").props.onClick(),TheEmailIsSetTo:e=>r=>r.root.findByProps({type:"email"}).props.onChange({target:{value:e}}),ThePasswordIsSetTo:e=>r=>r.root.findByProps({type:"password"}).props.onChange({target:{value:e}})},Thens:{TheEmailIs:e=>r=>{s.equal(r.root.findByProps({type:"email"}).props.value,e)},TheEmailIsNot:e=>r=>s.notEqual(r.root.findByProps({type:"email"}).props.value,e),ThePasswordIs:e=>r=>s.equal(r.root.findByProps({type:"password"}).props.value,e),ThePasswordIsNot:e=>r=>s.notEqual(r.root.findByProps({type:"password"}).props.value,e),ThereIsAnEmailError:()=>e=>s.notEqual(e.root.findByProps({type:"password"}).props.value,"password"),ThereIsNotAnEmailError:()=>e=>s.notEqual(e.root.findByProps({type:"password"}).props.value,"password")},Checks:{AnEmptyState:()=>({})}},(e,r,a,o,n)=>[e.Default("Testing the LoginPage as react",[r.default([k],[a.TheEmailIsSetTo("adam@email.com")],[o.TheEmailIs("adam@email.com")]),r.default([],[a.TheEmailIsSetTo("adam@email.com"),a.ThePasswordIsSetTo("secret")],[o.TheEmailIsNot("wade@rpc"),o.TheEmailIs("adam@email.com"),o.ThePasswordIs("secret"),o.ThePasswordIsNot("idk")]),r.default([],[a.TheEmailIsSetTo("adam")],[o.ThereIsNotAnEmailError()]),r.default([],[a.TheEmailIsSetTo("adam"),a.TheLoginIsSubmitted()],[o.ThereIsNotAnEmailError()])],[])],I);export{X as AppReactTesteranto};
